import{j as x,r as m,f as _,p as $,q as D,K as c,C as u,H as b,G as h,L as H,N as I,z as O}from"./framework.C9jrP3tW.js";const V={class:"bilibili-wrapper"},C={class:"bilibili-desc"},q=["href"],A=["src","title"],K={key:1,class:"loading-icon"},w="https://player.bilibili.com/player.html",Q="accelerometer; autoplay; clipboard-write; encrypted-media; fullscreen; gyroscope; picture-in-picture",U=x({__name:"BiliBili",props:{bvid:{},aid:{},cid:{},title:{default:"A BiliBili video"},page:{default:1},width:{default:"100%"},height:{},ratio:{default:16/9},time:{default:0},autoplay:{type:Boolean,default:!1},lowQuality:{type:Boolean,default:!1},noDanmaku:{type:Boolean,default:!1}},setup(N){const a=N,o=m(),p=m(!1),v=m("auto"),r=_(()=>{const{aid:e,bvid:t,cid:s,autoplay:d,time:z,page:y,lowQuality:E,noDanmaku:R}=a;if(!e&&!t)return null;let f="";const i=new URLSearchParams;if(e&&s)f=w,i.set("aid",String(e)),i.set("cid",String(s)),i.set("p",String(y));else if(t)f=w,i.set("bvid",String(t)),i.set("p",String(y));else return null;return i.set("t",String(z)),i.set("autoplay",d?"1":"0"),E&&i.set("quality","16"),R&&i.set("danmaku","0"),`${f}?${i.toString()}`}),g=e=>{if(typeof e=="number")return`${e}px`;if(typeof e=="string"){if(e.includes("%")||e.includes("px")||e.includes("em")||e.includes("rem"))return e;const t=parseFloat(e);return isNaN(t)?e:`${t}px`}return"100%"},k=_(()=>g(a.width)),B=e=>{if(typeof e=="string"){const[t,s]=e.split(":"),d=Number(t)/Number(s);if(!Number.isNaN(d))return d}return typeof e=="number"?e:16/9},S=e=>{const t=a.height,s=B(a.ratio);return t?g(t):`${Number(e)/s}px`},n=()=>{o.value&&(v.value=S(o.value.clientWidth))},L=()=>{p.value=!0,n()};let l=null;return $(()=>{n(),window.ResizeObserver&&o.value&&(l=new ResizeObserver(n),l.observe(o.value.parentElement)),window.addEventListener("resize",n),window.addEventListener("orientationchange",n)}),D(()=>{l&&l.disconnect(),window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}),(e,t)=>(u(),c("div",V,[b("div",C,[r.value?(u(),c("a",{key:0,class:"sr-only",href:r.value},H(e.title),9,q)):h("v-if",!0)]),r.value?(u(),c("iframe",{key:0,ref_key:"iframeRef",ref:o,src:r.value,title:e.title,class:"bilibili-iframe",allow:Q,style:I({width:k.value,height:p.value?v.value:0}),onLoad:L},null,44,A)):h("v-if",!0),p.value?h("v-if",!0):(u(),c("div",K,t[0]||(t[0]=[b("div",{class:"spinner"},null,-1)])))]))}}),j=O(U,[["__scopeId","data-v-cfc3e35d"]]);export{j as _};
